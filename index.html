<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="robots" content="index, follow">
		<title>conda-forge status</title>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
		<link rel="stylesheet" href="style.css">
		<link rel="icon" href="icon.png">
		<link rel="prefetch" type="application/l10n" href="translations.ini" />
	</head>
	<body>

		<main class="wrapper">

			<nav class="navigation">
				<section class="container">

					<a class="navigation-title" href="">
						<img class="img" src="icon.png" height="30">
						<h1 class="title">conda-forge status</h1>
					</a>



				</section>
			</nav>

			<section class="container" id="main">
				
					
					<div class="panel major outage">
						<span data-l10n-id="Major-outage">Major outage</span> <span data-l10n-id="on">on</span> CircleCI.
					</div>
					
				

				<h4 data-l10n-id="systems">Systems</h4>
				<ul class="systems">
					
					<li>
						Anaconda.org <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						AppVeyor <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						CircleCI <span class="status major outage" data-l10n-id="major-outage">major outage</span>
					</li>
					
					<li>
						Travis CI <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						conda <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						docs <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						feedstocks <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						linter <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
					<li>
						staged-recipes <span class="status operational" data-l10n-id="operational">operational</span>
					</li>
					
				</ul>

				<h4 data-l10n-id="incidents">Incidents</h4>
				
					
					<div class="incident">
						<span class="date moment">2016-12-07 15:24:01 UTC</span>

						
							<span class="label major outage float-right" data-l10n-id="major-outage">major outage</span>
						
						
							<span class="label system float-right">CircleCI</span>
						
						<hr/>

						<span class="title">PR Builds not starting</span>
						<p>Appears CircleCI builds for PRs are not starting. No known workaround at this time.</p>

						
							<p><em>Update <span class="moment">2016-12-07 15:29:16 UTC</span></em></p>
							<p>Have emailed support.</p>

						
							<p><em>Update <span class="moment">2016-12-07 15:32:13 UTC</span></em></p>
							<p>cc @conda-forge/core</p>

						
							<p><em>Update <span class="moment">2016-12-07 16:05:18 UTC</span></em></p>
							<p>I have receive a reply. Please see below.</p>

<blockquote>
  <p>We corrected a bug where we were allowing forked PR builds to run on Open Source projects even if that feature was disabled.</p>
  
  <p>To go back to the functionality you are used to, please enable <code>Permissive building of fork pull requests</code> in the advanced settings for the project on CircleCI.</p>
</blockquote>

<p>In short, it sounds like we were relying on a bug for PRs to work at all.</p>

						
							<p><em>Update <span class="moment">2016-12-07 16:15:06 UTC</span></em></p>
							<p>Should note that under this setting I see the following text.</p>

<blockquote>
  <p>There are serious security concerns with this setting (see the documentation for details.) If you have SSH keys, sensitive env vars or AWS credentials stored in your project settings and untrusted forks can make pull requests against your repo, then this option isn't for you!</p>
</blockquote>

<p>Not something that inspires confidence. ðŸ˜ž This may mean things deploy prematurely from PRs if these environment variables are exposed. Am asking CircleCI about this.</p>

						
							<p><em>Update <span class="moment">2016-12-07 16:28:17 UTC</span></em></p>
							<p>I do not think there are any security concerns for us.  According to that document:</p>

<p><code>
The variables configured via the circle.yml will be available in the fork PR builds 
(as they have access to the same circle.yml file); the values configured through 
the UI will not be visible to the fork PRs
</code></p>

<p>I believe that the anaconda.org upload token is stored as a secure variable via the UI and therefore is not visible in PRs.  This would be the only variable that I can think of that needs to be protected. </p>

						
							<p><em>Update <span class="moment">2016-12-07 16:35:17 UTC</span></em></p>
							<p>Going to <code>Settings</code> (the gear icon), <code>Advanced Settings</code> and switching the <code>Permissive building of fork pull requests</code> setting to <code>On</code> does in fact re-enable Circle CI build on pull requests.  I turned this on in the <code>python-feedstock</code> and the PR I submitted is building on Circle (conda-forge/python-feedstock#96).  </p>

<p>I think this will need to be done for all feedstocks.  It might be worthwhile to ask Circle CI if they can do this for all the <code>conda-forge</code> repositories as manually updating 1000+ settings will be a pain.  </p>

						
							<p><em>Update <span class="moment">2016-12-07 16:49:05 UTC</span></em></p>
							<blockquote>
  <p>I do not think there are any security concerns for us.</p>
</blockquote>

<p>I hope you are right. Which document are you referring too?</p>

<blockquote>
  <p>It might be worthwhile to ask Circle CI if they can do this for all the <code>conda-forge</code> repositories as manually updating 1000+ settings will be a pain.</p>
</blockquote>

<p>Also am asking about that too. It seems they don't have an API for us to do it. So even if we fix all of our repos, we will be stuck doing this manually when it comes to new repos.</p>

						
							<p><em>Update <span class="moment">2016-12-07 16:52:50 UTC</span></em></p>
							<p>I'm looking at the <a href="https://circleci.com/docs/fork-pr-builds/">Building Pull Requests from forks</a> document.  The odd part is that according to that document pull request builds should be turned on for public GitHub repositories (including conda-forge) by default.  I would be interested in seeing if <code>Permissive building of fork pull requests</code> is turned on for a newly created feedstock or not.</p>

						
							<p><em>Update <span class="moment">2016-12-07 17:08:41 UTC</span></em></p>
							<p>Should be easy to find out. ðŸ˜‰</p>

						
							<p><em>Update <span class="moment">2016-12-07 17:18:48 UTC</span></em></p>
							<p>Thanks for looking into this @jakirkham.  I have some day job work that needs attention but will be back tonight to keep the ball moving towards <code>conda build</code> 2!</p>

						
							<p><em>Update <span class="moment">2016-12-07 20:01:45 UTC</span></em></p>
							<p>So apparently turning on <code>Permissive build of fork pull requests</code> also exposes the Environment Variables for the repository to pull requests which results the package being uploaded from the pull request's Circle CI builds rather than after merging, for example in this <a href="https://circleci.com/gh/conda-forge/glib-feedstock/49?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">glib build</a>. </p>

<p>That is a serious security concern as packages are getting uploaded without review and the upload token could can be exposed by a malicious PR.  </p>

						
							<p><em>Update <span class="moment">2016-12-07 20:04:06 UTC</span></em></p>
							<p>Thanks for confirming this. Will ask what we can do about it.</p>

						
							<p><em>Update <span class="moment">2016-12-07 20:16:39 UTC</span></em></p>
							<p>Ahh wait.  Apparently this behavior is what <a href="https://circleci.com/docs/fork-pr-builds/#unsafe-fork-pr-builds">is expected</a> when the <code>Project fork pull requests</code> toggle is set.  So we should definitely <strong>NOT</strong> be doing that, sorry I suggested it.</p>

<p>Still does not explain why pull requests were not triggering builds.</p>

						
							<p><em>Update <span class="moment">2016-12-07 20:32:46 UTC</span></em></p>
							<blockquote>
  <p>Still does not explain why pull requests were not triggering builds.</p>
</blockquote>

<p>The explanation is we were relying on a "bug" to get pull requests to work before. Yesterday they "fixed" the "bug". Though IMHO it was a <a href="https://xkcd.com/1172/ ">feature</a> and they just broke it. ðŸ˜¢</p>

						
							<p><em>Update <span class="moment">2016-12-07 20:37:32 UTC</span></em></p>
							<blockquote>
  <p>Though IMHO it was a feature and they just broke it.</p>
</blockquote>

<p>Yes, and a very important feature at that.  It looks like the same thing is happening with the Circle CI build on SciPy.  I've opened an issue (scipy/scipy#6839) to track the issue there as well.</p>

						
							<p><em>Update <span class="moment">2016-12-08 06:39:59 UTC</span></em></p>
							<p>CircleCI said they are looking into it. Let's wait and see what comes out of it.</p>

						
							<p><em>Update <span class="moment">2016-12-12 22:42:30 UTC</span></em></p>
							<p>What are CircleCI thinking?!? Why would you <em>ever</em> want to expose your secrets through forked PRs? If you do actually want them exposed, you don't need to call them secret because anybody can echo them... it is a completely illogical move for open source, and a huge bug in their design.</p>

<p>Do you have a GitHub issue that we can xref?</p>

						
							<p><em>Update <span class="moment">2016-12-16 18:28:08 UTC</span></em></p>
							<p>Well, they have added a setting since that appears to disable exposing your secrets in a forked PR build. FWIW that appears to be off. I might try experimenting with this in one feedstock and see how it goes.</p>

						
							<p><em>Update <span class="moment">2016-12-22 07:50:09 UTC</span></em></p>
							<p>The current workaround is to enable CircleCI on one's own fork of the feedstock or staged-recipes and push new changes to get it to trigger with the other CIs.</p>

						
							<p><em>Update <span class="moment">2016-12-24 02:29:29 UTC</span></em></p>
							<p>Should add that another consequence of this problem is that sometimes recipes pending conversion in staged-recipes will be included in CircleCI builds as we are no longer able to do proper builds of PRs, but are instead having users build on their own fork. Fortunately it should not take away from the org queue on CircleCI though.</p>

<p>xref: https://github.com/conda-forge/staged-recipes/pull/1373
xref: https://github.com/conda-forge/staged-recipes/pull/1486</p>

						
							<p><em>Update <span class="moment">2017-01-03 04:21:05 UTC</span></em></p>
							<p>For details on how to enable CircleCI on your own fork, please see this <a href="http://conda-forge.github.io/docs/ciservices.html#circleci-linux ">doc</a>.</p>

						
							<p><em>Update <span class="moment">2017-01-04 18:38:46 UTC</span></em></p>
							<p>Was able to enable CircleCI builds on staged-recipes. To do this generally on a feedstock, one has to navigate to the repo settings on CircleCI (gear in the upper right hand corner). Then select "Advanced Settings" in the left panel. Finally enable "Build forked pull requests" only. After doing this one must close and reopen the PR. This likely requires administrative privileges on CircleCI. Screenshot below.</p>

<p><img width="1552" alt="screen shot 2017-01-04 at 13 35 42" src="https://cloud.githubusercontent.com/assets/3019665/21654315/0a7cb620-d283-11e6-8f8a-82fabf7efe31.png"></p>

						
					</div>
					
					<div class="incident">
						<span class="date moment">2016-10-19 14:13:39 UTC</span>

						
							<span class="label operational float-right" data-l10n-id="resolved">resolved</span>
						
						
							<span class="label system float-right">Travis CI</span>
						
						<hr/>

						<span class="title">Travis CI OS X build outage</span>
						<p>Travis CI is working on an OS X build outage issue. More details can be found <a href="https://www.traviscistatus.com/incidents/4jb1rlhj7ynq">here</a>.</p>

						
							<p><em>Update <span class="moment">2016-10-19 14:26:02 UTC</span></em></p>
							<p>Upstream has marked this as resolved.</p>

						
					</div>
					
					<div class="incident">
						<span class="date moment">2016-10-13 15:49:59 UTC</span>

						
							<span class="label operational float-right" data-l10n-id="resolved">resolved</span>
						
						
							<span class="label system float-right">Travis CI</span>
						
						<hr/>

						<span class="title">Travis CI OS X builds stopped</span>
						<p>Travis CI has stopped all OS X builds. Please find more info at the linked status.</p>

<p>xref: https://www.traviscistatus.com/incidents/b4xk2bybjc9d</p>

						
							<p><em>Update <span class="moment">2016-10-13 17:04:00 UTC</span></em></p>
							<p>Travis CI says OS X jobs are being restarted. There is still a backlog being processed.</p>

						
							<p><em>Update <span class="moment">2016-10-15 19:37:26 UTC</span></em></p>
							<p>This is now resolved.</p>

						
					</div>
					
					<div class="incident">
						<span class="date moment">2016-10-13 06:01:54 UTC</span>

						
							<span class="label operational float-right" data-l10n-id="resolved">resolved</span>
						
						
							<span class="label system float-right">Travis CI</span>
						
						<hr/>

						<span class="title">Travis OS X Backlog</span>
						<p>Travis CI is currently processing the backlog of OS X builds after a resolved incident earlier.</p>

<p>xref: https://www.traviscistatus.com/incidents/80y71tv5zkc5</p>

						
							<p><em>Update <span class="moment">2016-10-13 15:49:10 UTC</span></em></p>
							<p>This incident has been closed.</p>

						
					</div>
					
					<div class="incident">
						<span class="date moment">2016-10-12 23:59:08 UTC</span>

						
							<span class="label operational float-right" data-l10n-id="resolved">resolved</span>
						
						
							<span class="label system float-right">Anaconda.org</span>
						
						<hr/>

						<span class="title">Download issues with Anaconda.org/conda-forge on CIs</span>
						<p>Seeing intermittent download issues from <code>conda-forge</code> on CIs. Please restart builds if you encounter this issue. Have filed a bug report upstream to track this.</p>

<p>xref: https://github.com/Anaconda-Platform/support/issues/78</p>

						
							<p><em>Update <span class="moment">2016-11-17 15:32:01 UTC</span></em></p>
							<p>The primary issue seems to have been resolved with a new release of anaconda.org. There are still some linger issues, but they do not occur with near the same frequency and are actively being worked on by upstream as mentioned in the xref'd issue. Considering this resolved. Closing...</p>

						
					</div>
					
					<div class="incident">
						<span class="date moment">2016-10-12 00:01:42 UTC</span>

						
							<span class="label operational float-right" data-l10n-id="resolved">resolved</span>
						
						
							<span class="label system float-right">Travis CI</span>
						
						<hr/>

						<span class="title">OS X Backlog</span>
						<p>There seems to be a backlog on Travis CI. Have raised issue ( https://github.com/travis-ci/travis-ci/issues/6712 ) upstream.</p>

						
							<p><em>Update <span class="moment">2016-10-12 04:18:19 UTC</span></em></p>
							<p>This seems to be improving.</p>

						
					</div>
					
					<div class="incident">
						<span class="date moment">2016-10-04 20:41:32 UTC</span>

						
							<span class="label operational float-right" data-l10n-id="resolved">resolved</span>
						
						
							<span class="label system float-right">staged-recipes</span>
						
						<hr/>

						<span class="title">Conversion backed up</span>
						<p>We are experiencing some issues with a recipe converting to a feedstock. This may impact other recipes waiting to convert.</p>

						
							<p><em>Update <span class="moment">2016-10-05 00:46:12 UTC</span></em></p>
							<p>Reopening as Travis CI still appears to be backed up.</p>

						
							<p><em>Update <span class="moment">2016-10-05 00:49:01 UTC</span></em></p>
							<p>Yeah, travis is crazy backed up right now</p>

						
							<p><em>Update <span class="moment">2016-10-12 00:00:23 UTC</span></em></p>
							<p>This has since been resolved.</p>

						
					</div>
					
				
			</section>


			<footer class="footer">
				<section class="container">
					<hr/>
					<p>Status page for <a href='https://conda-forge.github.io'>conda-forge</a>, generated with <a href='https://github.com/jayfk/statuspage'>jayfk/statuspage</a>.</p>
				</section>
			</footer>

		</main>
		<script src="statuspage.js" type="text/javascript"></script>
	</body>
</html>